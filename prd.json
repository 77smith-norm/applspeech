{
  "project": "applspeech",
  "branchName": "main",
  "description": "CLI for on-device speech transcription using Speech framework",
  "stories": [
    {
      "id": "S01-project-setup",
      "title": "Project setup and Package.swift",
      "description": "Initialize Swift package with basic structure, Package.swift, and entry point",
      "dependencies": [],
      "acceptance_criteria": [
        "Package.swift is valid and builds",
        "Basic CLI entry point exists",
        "App runs and shows help",
        "Test suite runs"
      ],
      "priority": 1,
      "passes": false
    },
    {
      "id": "S02-basic-commands",
      "title": "Basic command structure",
      "description": "Set up ArgumentParser with basic commands (transcribe, analyze, version)",
      "dependencies": ["S01-project-setup"],
      "acceptance_criteria": [
        "applspeech --help works",
        "applspeech --version works",
        "Subcommands registered"
      ],
      "priority": 2,
      "passes": false
    },
    {
      "id": "S03-speech-framework",
      "title": "Speech framework integration",
      "description": "Integrate Speech framework, request authorization, set up SFSpeechRecognizer",
      "dependencies": ["S01-project-setup"],
      "acceptance_criteria": [
        "Speech recognition authorization requested",
        "SFSpeechRecognizer initialized",
        "Error handling for denied/restricted states"
      ],
      "priority": 3,
      "passes": false
    },
    {
      "id": "S04-file-transcription",
      "title": "File-based transcription",
      "description": "Implement transcription from local audio files (m4a, mp3, wav, etc.)",
      "dependencies": ["S03-speech-framework"],
      "acceptance_criteria": [
        "Transcribe audio file from path",
        "Support multiple audio formats",
        "Return transcribed text",
        "Handle unsupported formats gracefully"
      ],
      "priority": 4,
      "passes": false
    },
    {
      "id": "S05-live-transcription",
      "title": "Live microphone transcription",
      "description": "Implement real-time transcription from system microphone",
      "dependencies": ["S03-speech-framework"],
      "acceptance_criteria": [
        "Request microphone permission",
        "Live transcription from mic",
        "Handle start/stop",
        "Handle interruption"
      ],
      "priority": 5,
      "passes": false
    },
    {
      "id": "S06-output-formats",
      "title": "Output format options",
      "description": "Add JSON, plain text, and formatted output options",
      "dependencies": ["S04-file-transcription"],
      "acceptance_criteria": [
        "--format json output",
        "--format plain output",
        "Include confidence scores in output"
      ],
      "priority": 6,
      "passes": false
    },
    {
      "id": "S07-language-selection",
      "title": "Language selection",
      "description": "Add language code selection for transcription",
      "dependencies": ["S04-file-transcription"],
      "acceptance_criteria": [
        "--language flag support",
        "Default to system locale",
        "List available languages"
      ],
      "priority": 7,
      "passes": false
    },
    {
      "id": "S08-speechanalyzer",
      "title": "SpeechAnalyzer integration",
      "description": "Add SpeechAnalyzer API for voice analysis (pitch, tempo, etc.)",
      "dependencies": ["S04-file-transcription"],
      "acceptance_criteria": [
        "Analyze audio for voice characteristics",
        "Return analysis results",
        "Handle unsupported audio"
      ],
      "priority": 8,
      "passes": false
    },
    {
      "id": "S09-url-transcription",
      "title": "URL-based transcription",
      "description": "Add support for transcribing remote audio files via URL",
      "dependencies": ["S04-file-transcription"],
      "acceptance_criteria": [
        "Accept HTTP/HTTPS URLs",
        "Download and transcribe",
        "Handle network errors"
      ],
      "priority": 9,
      "passes": false
    },
    {
      "id": "S10-telegram-integration",
      "title": "Telegram bot integration",
      "description": "Add ability to receive and transcribe audio from Telegram messages",
      "dependencies": ["S04-file-transcription"],
      "acceptance_criteria": [
        "Receive voice messages from Telegram",
        "Download audio from Telegram",
        "Transcribe and return results",
        "Handle non-voice messages gracefully"
      ],
      "priority": 10,
      "passes": false
    },
    {
      "id": "S11-cli-polish",
      "title": "CLI polish and documentation",
      "description": "Final polish: examples, better help text, README",
      "dependencies": ["S06-output-formats", "S07-language-selection", "S10-telegram-integration"],
      "acceptance_criteria": [
        "Complete README with examples",
        "Help text for all commands",
        "Error messages are user-friendly"
      ],
      "priority": 11,
      "passes": false
    }
  ]
}
