{
  "project": "applspeech",
  "branchName": "main",
  "description": "CLI for on-device speech transcription - optimized for AI agent usage",
  "stories": [
    {
      "id": "S01-project-setup",
      "title": "Project setup",
      "description": "Initialize Swift package with Package.swift and basic entry point",
      "dependencies": [],
      "acceptance_criteria": [
        "Package.swift builds successfully",
        "Basic CLI shows help",
        "Test suite runs"
      ],
      "priority": 1,
      "passes": true
    },
    {
      "id": "S02-transcribe-file",
      "title": "File transcription",
      "description": "Core: transcribe local audio files (legacy SFSpeechRecognizer; modern SpeechTranscriber engine on macOS 26+)",
      "dependencies": [
        "S01-project-setup"
      ],
      "acceptance_criteria": [
        "applspeech transcribe <file> works",
        "Supports flac, wav, m4a, mp3",
        "On-device transcription (privacy)",
        "Returns transcribed text",
        "--engine flag selects transcription engine"
      ],
      "priority": 2,
      "passes": true
    },
    {
      "id": "S03-json-output",
      "title": "JSON output",
      "description": "JSON output format for programmatic use by AI agents",
      "dependencies": [
        "S02-transcribe-file"
      ],
      "acceptance_criteria": [
        "--format json flag",
        "Includes text, file, language, engine",
        "Parseable by scripts"
      ],
      "priority": 3,
      "passes": true
    },
    {
      "id": "S04-locale-support",
      "title": "Locale selection",
      "description": "Language/locale selection with optional model download via authorize",
      "dependencies": [
        "S02-transcribe-file"
      ],
      "acceptance_criteria": [
        "--locale flag (e.g., en-US)",
        "Optional model download for modern engine via authorize",
        "Default to en-US"
      ],
      "priority": 4,
      "passes": true
    },
    {
      "id": "S05-url-transcription",
      "title": "URL transcription",
      "description": "Transcribe remote audio files via HTTP/HTTPS URL",
      "dependencies": [
        "S02-transcribe-file"
      ],
      "acceptance_criteria": [
        "applspeech transcribe https://... works",
        "Downloads and processes",
        "Handles network errors"
      ],
      "priority": 5,
      "passes": true
    },
    {
      "id": "S06-telegram-source",
      "title": "Telegram audio source",
      "description": "Receive and transcribe audio from Telegram messages",
      "dependencies": [
        "S02-transcribe-file"
      ],
      "acceptance_criteria": [
        "Process voice messages",
        "Download from Telegram",
        "Return transcription"
      ],
      "priority": 6,
      "passes": true
    },
    {
      "id": "S07-stdin-pipe",
      "title": "Stdin/pipe support",
      "description": "Accept audio via stdin for pipeline usage",
      "dependencies": [
        "S02-transcribe-file"
      ],
      "acceptance_criteria": [
        "cat audio.m4a | applspeech transcribe -",
        "Works in pipelines",
        "Compatible with curl |"
      ],
      "priority": 7,
      "passes": true
    },
    {
      "id": "S08-speechanalyzer",
      "title": "SpeechAnalyzer voice analysis",
      "description": "Voice analysis (pitch, tempo) via SpeechAnalyzer API",
      "dependencies": [
        "S02-transcribe-file"
      ],
      "acceptance_criteria": [
        "applspeech analyze command",
        "Returns voice characteristics",
        "Works on audio files"
      ],
      "priority": 8,
      "passes": false
    },
    {
      "id": "S09-cli-polish",
      "title": "CLI polish",
      "description": "Help text, examples, error messages",
      "dependencies": [
        "S03-json-output",
        "S04-locale-support",
        "S06-telegram-source"
      ],
      "acceptance_criteria": [
        "Complete --help",
        "README with examples",
        "User-friendly errors"
      ],
      "priority": 9,
      "passes": true
    }
  ]
}
